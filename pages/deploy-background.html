
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>后端部署 · 调度系统-EasyScheduler</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="YIGUAN">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo-link/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="deploy-background.html" />
    
    
    <link rel="prev" href="deploy-foreground.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Easyscheduler简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    导读指南
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html">
            
                    
                    系统架构分析
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#导语">
            
                    
                    导语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#背景">
            
                    
                    背景
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#总架构设计">
            
                    
                    总架构设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#中心化思想">
            
                    
                    中心化思想
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#分布式锁实践">
            
                    
                    分布式锁实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#线程不足循环等待问题">
            
                    
                    线程不足循环等待问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#容错设计">
            
                    
                    容错设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#日志访问">
            
                    
                    Logback和gRPC实现日志访问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="guide-architecture.html">
            
                <a href="guide-architecture.html#总结">
            
                    
                    总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="guide-manual.html">
            
                <a href="guide-manual.html">
            
                    
                    使用手册
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="guide-manual.html">
            
                <a href="guide-manual.html#登录">
            
                    
                    登录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="guide-manual.html">
            
                <a href="guide-manual.html#安全中心">
            
                    
                    安全中心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="guide-manual.html">
            
                <a href="guide-manual.html#资源中心">
            
                    
                    资源中心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="guide-manual.html">
            
                <a href="guide-manual.html#数据源中心">
            
                    
                    数据源中心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="guide-manual.html">
            
                <a href="guide-manual.html#项目管理">
            
                    
                    项目管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="guide-manual.html">
            
                <a href="guide-manual.html#首页">
            
                    
                    站点首页
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="guide-manual.html">
            
                <a href="guide-manual.html#任务依赖">
            
                    
                    任务依赖
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="guide-manual.html">
            
                <a href="guide-manual.html#系统参数">
            
                    
                    系统参数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    项目部署文档
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html">
            
                    
                    前端部署
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html#前端项目环境构建及编译">
            
                    
                    前端项目环境构建及编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html#安装及配置">
            
                    
                    安装及配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html#项目生产环境配置">
            
                    
                    项目生产环境Nginx配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html#前端项目发布">
            
                    
                    前端项目发布
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="deploy-foreground.html">
            
                <a href="deploy-foreground.html#问题">
            
                    
                    问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3.2" data-path="deploy-background.html">
            
                <a href="deploy-background.html">
            
                    
                    后端部署
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="deploy-background.html">
            
                <a href="deploy-background.html#基础软件安装">
            
                    
                    基础软件安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="deploy-background.html">
            
                <a href="deploy-background.html#项目编译">
            
                    
                    项目编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="deploy-background.html">
            
                <a href="deploy-background.html#数据库初始化">
            
                    
                    数据库初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="deploy-background.html">
            
                <a href="deploy-background.html#创建部署用户">
            
                    
                    创建部署用户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="deploy-background.html">
            
                <a href="deploy-background.html#配置文件">
            
                    
                    配置文件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.5.1" data-path="deploy-background.html">
            
                <a href="deploy-background.html#escheduler-alert">
            
                    
                    escheduler-alert
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5.2" data-path="deploy-background.html">
            
                <a href="deploy-background.html#escheduler-common">
            
                    
                    escheduler-common
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5.3" data-path="deploy-background.html">
            
                <a href="deploy-background.html#escheduler-dao">
            
                    
                    escheduler-dao
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5.4" data-path="deploy-background.html">
            
                <a href="deploy-background.html#escheduler-server">
            
                    
                    escheduler-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5.5" data-path="deploy-background.html">
            
                <a href="deploy-background.html#escheduler-web">
            
                    
                    escheduler-web
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="deploy-background.html">
            
                <a href="deploy-background.html#启动停止命令">
            
                    
                    启动停止命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="deploy-background.html">
            
                <a href="deploy-background.html#一键启停脚本">
            
                    
                    一键启停脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="deploy-background.html">
            
                <a href="deploy-background.html#监控服务">
            
                    
                    监控服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="deploy-background.html">
            
                <a href="deploy-background.html#日志查看">
            
                    
                    日志查看
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    前端开发文档
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="foreground-2.html">
            
                <a href="foreground-2.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    后端开发文档
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="background-2.html">
            
                <a href="background-2.html">
            
                    
                    后端说明2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >后端部署</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>&#x200B;</p>
<h1 id="&#x90E8;&#x7F72;&#x6587;&#x6863;">&#x90E8;&#x7F72;&#x6587;&#x6863;</h1>
<h2 id="&#x8F6F;&#x4EF6;&#x8981;&#x6C42;">&#x8F6F;&#x4EF6;&#x8981;&#x6C42;</h2>
<ul>
<li><a href="https://blog.csdn.net/u011886447/article/details/79796802" target="_blank">Mysql</a> (5.5+) :  &#x5FC5;&#x88C5;</li>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">JDK</a> (1.8+) &#xFF1A;&#x5FC5;&#x88C5; </li>
<li><a href="https://www.jianshu.com/p/de90172ea680" target="_blank">Zookeeper</a> (3.4.6) &#xFF1A;&#x5FC5;&#x88C5; </li>
<li><a href="https://blog.csdn.net/Evankaka/article/details/51612437" target="_blank">Hadoop</a> (2.7+) &#xFF1A;&#x9009;&#x88C5;&#xFF0C; &#x5982;&#x679C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230;EasyScheduler&#x7684;&#x8D44;&#x6E90;&#x4E0A;&#x4F20;&#xFF0C;MapReduce&#x4EFB;&#x52A1;&#x5728;&#x7EBF;&#x63D0;&#x4EA4;&#x5219;&#x9700;&#x8981;&#x5B89;&#x88C5;(&#x4E0A;&#x4F20;&#x7684;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x76EE;&#x524D;&#x4FDD;&#x5B58;&#x5728;Hdfs&#x4E0A;)</li>
<li><a href="https://staroon.pro/2017/12/09/HiveInstall/" target="_blank">Hive</a> (1.2.1+) :  &#x9009;&#x88C5;&#xFF0C;&#x5982;&#x679C;&#x8DD1;Hive&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x5B89;&#x88C5;(</li>
<li><a href="https://www.cnblogs.com/caoguo/p/4625662.html" target="_blank">Reids&#x5B89;&#x88C5;</a> (2.7.0+)  : &#x9009;&#x88C5;&#xFF0C; &#x4EFB;&#x52A1;&#x961F;&#x5217;&#x9009;&#x62E9;Redis&#x65F6;&#x9700;&#x8981;&#x5B89;&#x88C5;</li>
<li>Spark(1.x,2.x) : &#x9009;&#x88C5;&#xFF0C;Spark&#x4EFB;&#x52A1;&#x63D0;&#x4EA4;&#x9700;&#x8981;&#x5B89;&#x88C5;</li>
<li><p>PostgreSQL(8.2.15+) : &#x9009;&#x88C5;&#xFF0C;PostgreSQL&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x9700;&#x8981;&#x5B89;&#x88C5;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;EasyScheduler&#x672C;&#x8EAB;&#x4E0D;&#x4F9D;&#x8D56;Hadoop&#x3001;Hive&#x3001;Spark&#x3001;PostgreSQL&#x3001;Redis,&#x4EC5;&#x662F;&#x7528;&#x5230;&#x4E86;&#x4ED6;&#x4EEC;&#x7684;Client jar&#xFF0C;&#x7528;&#x4E8E;&#x5BF9;&#x5E94;&#x4EFB;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x3002;</p>
</blockquote>
</li>
</ul>
<h2 id="&#x9879;&#x76EE;&#x7F16;&#x8BD1;">&#x9879;&#x76EE;&#x7F16;&#x8BD1;</h2>
<ul>
<li>&#x6267;&#x884C;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;&#xFF1A;</li>
</ul>
<blockquote>
<p><code>mvn -U clean package assembly:assembly -Dmaven.test.skip=true</code> </p>
</blockquote>
<ul>
<li>&#x67E5;&#x770B;&#x76EE;&#x5F55;</li>
</ul>
<p>&#x6B63;&#x5E38;&#x7F16;&#x8BD1;&#x5B8C;&#x540E;&#xFF0C;&#x4F1A;&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x751F;&#x6210; target/escheduler-{version}-SNAPSHOT/</p>
<pre><code>    bin
    conf
    lib
    script
    sql
</code></pre><ul>
<li><p>&#x8BF4;&#x660E;</p>
<pre><code>bin  : &#x5DE5;&#x7A0B;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x811A;&#x672C;
conf : &#x5DE5;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;
lib  : &#x5DE5;&#x7A0B;&#x4F9D;&#x8D56;jar&#x5305;&#xFF0C;&#x5305;&#x62EC;&#x5404;&#x4E2A;&#x6A21;&#x5757;jar&#x548C;&#x7B2C;&#x4E09;&#x65B9;jar
script : &#x5DE5;&#x7A0B;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x3001;&#x542F;&#x52A8;&#x811A;&#x672C;
sql  : &#x5DE5;&#x7A0B;&#x4F9D;&#x8D56;sql&#x6587;&#x4EF6;
</code></pre></li>
</ul>
<h2 id="&#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;">&#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;</h2>
<ul>
<li>&#x521B;&#x5EFA;database&#x548C;&#x8D26;&#x53F7;</li>
</ul>
<pre><code>mysql -h {host} -u {user} -p{password}
mysql&gt; CREATE DATABASE escheduler DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;
mysql&gt; GRANT ALL PRIVILEGES ON escheduler.* TO &apos;{user}&apos;@&apos;%&apos; IDENTIFIED BY &apos;{password}&apos;;
mysql&gt; GRANT ALL PRIVILEGES ON escheduler.* TO &apos;{user}&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;{password}&apos;;
mysql&gt; flush privileges;
</code></pre><ul>
<li>&#x521B;&#x5EFA;&#x8868;</li>
</ul>
<pre><code>&#x8BF4;&#x660E;&#xFF1A;&#x5728;target/escheduler-{version}-SNAPSHOT/sql/&#x6709;&#x4E24;&#x4E2A;sql&#x521B;&#x5EFA;&#x8868;&#x6587;&#x4EF6;&#xFF1A;escheduler.sql&#x548C;quartz.sql
&#x6267;&#x884C;&#xFF1A;
mysql -h {host} -u {user} -p{password} -D {db} &lt; escheduler.sql
mysql -h {host} -u {user} -p{password} -D {db} &lt; quartz.sql
</code></pre><h2 id="&#x521B;&#x5EFA;&#x90E8;&#x7F72;&#x7528;&#x6237;">&#x521B;&#x5EFA;&#x90E8;&#x7F72;&#x7528;&#x6237;</h2>
<p>&#x56E0;&#x4E3A;easyscheduler worker&#x90FD;&#x662F;&#x4EE5; sudo -u {linux-user} &#x65B9;&#x5F0F;&#x6765;&#x6267;&#x884C;&#x4F5C;&#x4E1A;&#xFF0C;&#x6240;&#x4EE5;&#x90E8;&#x7F72;&#x7528;&#x6237;&#x9700;&#x8981;&#x6709; sudo &#x6743;&#x9650;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x514D;&#x5BC6;&#x7684;&#x3002;</p>
<pre><code>&#x90E8;&#x7F72;&#x8D26;&#x53F7;
vi /etc/sudoers

# &#x90E8;&#x7F72;&#x7528;&#x6237;&#x662F; escheduler &#x8D26;&#x53F7;
escheduler  ALL=(ALL)       NOPASSWD: NOPASSWD: ALL

# &#x5E76;&#x4E14;&#x9700;&#x8981;&#x6CE8;&#x91CA;&#x6389; Default requiretty &#x4E00;&#x884C;
#Default requiretty
</code></pre><h2 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2>
<p><code>&#x8BF4;&#x660E;&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E; target/escheduler-{version}-SNAPSHOT/conf &#x4E0B;&#x9762;</code></p>
<h3 id="escheduler-alert">escheduler-alert</h3>
<p>&#x914D;&#x7F6E;&#x90AE;&#x4EF6;&#x544A;&#x8B66;&#x4FE1;&#x606F;</p>
<ul>
<li>alert.properties </li>
</ul>
<pre><code>#&#x4EE5;qq&#x90AE;&#x7BB1;&#x4E3A;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x522B;&#x7684;&#x90AE;&#x7BB1;&#xFF0C;&#x8BF7;&#x66F4;&#x6539;&#x5BF9;&#x5E94;&#x914D;&#x7F6E;
#alert type is EMAIL/SMS
alert.type=EMAIL

# mail server configuration
mail.protocol=SMTP
mail.server.host=smtp.exmail.qq.com
mail.server.port=25
mail.sender=xxxxxx@qq.com
mail.passwd=xxxxxxx

# xls file path, need manually create it before use if not exist
xls.file.path=/opt/xls
</code></pre><p>&#x914D;&#x7F6E;&#x544A;&#x8B66;&#x6570;&#x636E;&#x6E90;&#x4FE1;&#x606F;</p>
<ul>
<li>alert/data_source.properties </li>
</ul>
<pre><code>#&#x6CE8;&#x610F;&#xFF1A;&#x8BF7;&#x66FF;&#x6362;${xxx}&#x91CC;&#x7684;&#x5185;&#x5BB9;

# common configuration
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://${ip}:3306/escheduler?characterEncoding=UTF-8
spring.datasource.username=${username}
spring.datasource.password=${password}

# supplement configuration
spring.datasource.initialSize=5
# min connection number
spring.datasource.minIdle=5
# max connection number
spring.datasource.maxActive=20

# max wait time for get connection
spring.datasource.maxWait=60000

# idle connections closed&#xFF0C;unit milliseconds
spring.datasource.timeBetweenEvictionRunsMillis=60000

# connection minimum survival time&#xFF0C;unit milliseconds
spring.datasource.minEvictableIdleTimeMillis=300000
spring.datasource.validationQuery=SELECT 1
spring.datasource.validationQueryTimeout=3
spring.datasource.testWhileIdle=true
spring.datasource.testOnBorrow=true
spring.datasource.testOnReturn=false
spring.datasource.defaultAutoCommit=true

# open PSCache&#xFF0C;set PSCache size
spring.datasource.poolPreparedStatements=false
spring.datasource.maxPoolPreparedStatementPerConnectionSize=20
</code></pre><p>&#x65E5;&#x5FD7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>alert_logback.xml</li>
</ul>
<pre><code>&lt;!-- Logback configuration. See http://logback.qos.ch/manual/index.html --&gt;
&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;120 seconds&quot;&gt; &lt;!--debug=&quot;true&quot; --&gt;
    &lt;property name=&quot;log.base&quot; value=&quot;logs&quot; /&gt;
    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
            &lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;ALERTLOGFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;file&gt;${log.base}/escheduler-alert.log&lt;/file&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;${log.base}/escheduler-alert.%d{yyyy-MM-dd_HH}.%i.log&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;20&lt;/maxHistory&gt;
            &lt;maxFileSize&gt;64MB&lt;/maxFileSize&gt;
        &lt;/rollingPolicy&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
            &lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;ALERTLOGFILE&quot;/&gt;
    &lt;/root&gt;
&lt;/configuration&gt;
</code></pre><h3 id="escheduler-common">escheduler-common</h3>
<p>&#x901A;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#xFF0C;&#x961F;&#x5217;&#x9009;&#x62E9;&#x53CA;&#x5730;&#x5740;&#x914D;&#x7F6E;&#xFF0C;&#x901A;&#x7528;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x914D;&#x7F6E;&#x3002;</p>
<ul>
<li>common/common.properties</li>
</ul>
<pre><code>#task queue implementation, can choose &quot;redis&quot; or &quot;zookeeper&quot;, default &quot;zookeeper&quot;
escheduler.queue.impl=zookeeper

#if escheduler.queue.impl=redis, you need to configuration relevant information with redis. redis configuration start
spring.redis.host=${redis_ip}
spring.redis.port=6379
spring.redis.maxIdle=1000
spring.redis.maxTotal=10000
#redis configuration end

# user data directory path, self configuration, please make sure the directory exists and have read write permissions
data.basedir.path=/xxx/xxx

# directory path for user data download. self configuration, please make sure the directory exists and have read write permissions
data.download.basedir.path=/xxx/xxx 

# process execute directory. self configuration, please make sure the directory exists and have read write permissions
process.exec.basepath=/xxx/xxx

# data base dir, resource file will store to this hadoop hdfs path, self configuration, please make sure the directory exists on hdfs and have read write permissions&#x3002;&quot;/escheduler&quot; is recommended
data.store2hdfs.basepath=/escheduler

# system env path. self configuration, please make sure the directory and file exists and have read write execute permissions
escheduler.env.path=/xxx/xxx/.escheduler_env.sh
escheduler.env.py=/xxx/xxx/escheduler_env.py

#resource.view.suffixs
resource.view.suffixs=txt,log,sh,conf,cfg,py,java,sql,hql,xml

# is development state? default &quot;false&quot;
development.state=false
</code></pre><p>SHELL&#x4EFB;&#x52A1; &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;</p>
<p>.escheduler_env.sh  </p>
<pre><code>#self configuration, please make sure the directory exists and have read write permissions
export HADOOP_HOME=/opt/soft/hadoop
export HADOOP_CONF_DIR=/opt/soft/hadoop/etc/hadoop
export SPARK_HOME1=/opt/soft/spark1
export SPARK_HOME2=/opt/soft/spark2
export PYTHON_HOME=/opt/soft/python
export JAVA_HOME=/opt/soft/java
export HIVE_HOME=/opt/soft/hive

export PATH=$HADOOP_HOME/bin:$SPARK_HOME1/bin:$SPARK_HOME2/bin:$PYTHON_HOME/bin:$JAVA_HOME/bin:$HIVE_HOME/bin:$PATH
</code></pre><p>&#x200B;    </p>
<p>Python&#x4EFB;&#x52A1; &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;</p>
<p>escheduler_env.py</p>
<pre><code>#self configuration, please make sure the directory exists and have read write execute permissions

import os

HADOOP_HOME=&quot;/opt/soft/hadoop&quot;
PYTHON_HOME=&quot;/opt/soft/python&quot;
JAVA_HOME=&quot;/opt/soft/java&quot;
PATH=os.environ[&apos;PATH&apos;]
PATH=&quot;%s/bin:%s/bin:%s/bin:%s&quot;%(HADOOP_HOME,JAVA_HOME,PYTHON_HOME,PATH)

os.putenv(&apos;PATH&apos;,&apos;%s&apos;%PATH)
</code></pre><p>hadoop &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>common/hadoop/hadoop.properties</li>
</ul>
<pre><code>#please replace the content in ${xxx}
# ha or single namenode
fs.defaultFS=hdfs://${cluster_ipOrName}:8020

#resourcemanager ha note this need ips , eg. 192.168.220.188,192.168.220.189
yarn.resourcemanager.ha.rm.ids=${ip1},${ip2}

# reousrcemanager path 
yarn.application.status.address=http://${ip1}:8088/ws/v1/cluster/apps/%s
</code></pre><p>&#x5B9A;&#x65F6;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>quartz.properties</li>
</ul>
<pre><code>#please replace the content in ${xxx}
#============================================================================
# Configure Main Scheduler Properties
#============================================================================
org.quartz.scheduler.instanceName = EasyScheduler
org.quartz.scheduler.instanceId = AUTO
org.quartz.scheduler.makeSchedulerThreadDaemon = true
org.quartz.jobStore.useProperties = false

#============================================================================
# Configure ThreadPool
#============================================================================

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.makeThreadsDaemons = true
org.quartz.threadPool.threadCount = 25
org.quartz.threadPool.threadPriority = 5

#============================================================================
# Configure JobStore
#============================================================================

org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.tablePrefix = QRTZ_
org.quartz.jobStore.isClustered = true
org.quartz.jobStore.misfireThreshold = 60000
org.quartz.jobStore.clusterCheckinInterval = 5000
org.quartz.jobStore.dataSource = myDs

#============================================================================
# Configure Datasources  
#============================================================================

org.quartz.dataSource.myDs.driver = com.mysql.jdbc.Driver
org.quartz.dataSource.myDs.URL = jdbc:mysql://${ip}:3306/escheduler?characterEncoding=utf8&amp;useSSL=false
org.quartz.dataSource.myDs.user = ${username}
org.quartz.dataSource.myDs.password = ${password}
org.quartz.dataSource.myDs.maxConnections = 10
org.quartz.dataSource.myDs.validationQuery = select 1
</code></pre><p>zookeeper &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>zookeeper.properties</li>
</ul>
<pre><code>#zookeeper cluster. eg. 192.168.220.188:2181,192.168.220.189:2181,192.168.220.190:2181
zookeeper.quorum=${ip1}:2181,${ip2}:2181,${ip3}:2181

#zookeeper server dirctory
zookeeper.escheduler.master=/escheduler/masters
zookeeper.escheduler.worker=/escheduler/workers

#zookeeper lock dirctory
zookeeper.escheduler.lock.master=/escheduler/lock/master
zookeeper.escheduler.lock.worker=/escheduler/lock/worker

#escheduler root directory
zookeeper.escheduler.root=/escheduler

#escheduler failover directory
zookeeper.escheduler.lock.master.failover=/escheduler/lock/failover/master
zookeeper.escheduler.lock.worker.failover=/escheduler/lock/failover/worker

#escheduler failover directory
zookeeper.session.timeout=300
zookeeper.connection.timeout=300
zookeeper.retry.sleep=1000
zookeeper.retry.maxtime=5
</code></pre><h3 id="escheduler-dao">escheduler-dao</h3>
<p>dao&#x6570;&#x636E;&#x6E90;&#x914D;&#x7F6E;</p>
<ul>
<li>dao/data_source.properties</li>
</ul>
<pre><code>#please replace the content in ${xxx}

# base spring data source configuration
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://${ip}:3306/escheduler?characterEncoding=UTF-8
spring.datasource.username=${username}
spring.datasource.password=${password}

# connection configuration
spring.datasource.initialSize=5
spring.datasource.minIdle=5
spring.datasource.maxActive=20

# max seconds wait connection timeout
spring.datasource.maxWait=60000

# milliseconds for check to close free connections
spring.datasource.timeBetweenEvictionRunsMillis=60000

#  connection minimum survival time(milliseconds)
spring.datasource.minEvictableIdleTimeMillis=300000
spring.datasource.validationQuery=SELECT 1
spring.datasource.validationQueryTimeout=3
spring.datasource.testWhileIdle=true
spring.datasource.testOnBorrow=true
spring.datasource.testOnReturn=false
spring.datasource.defaultAutoCommit=true

# open PSCache, specify count PSCache for every connection
spring.datasource.poolPreparedStatements=true
spring.datasource.maxPoolPreparedStatementPerConnectionSize=20


# data quality analysis is not currently in use. please ignore the following configuration
# task record flag
task.record.flag=false
task.record.datasource.url=jdbc:mysql://${ip}:3306/etl?characterEncoding=UTF-8
task.record.datasource.username=etl
task.record.datasource.password=xxxxx
</code></pre><h3 id="escheduler-server">escheduler-server</h3>
<p>master&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>master.properties</li>
</ul>
<pre><code># master execute thread num
master.exec.threads=100

# master execute task number in parallel
master.exec.task.number=20

# master heartbeat interval
master.heartbeat.interval=8

# master commit task retry times
master.task.commit.retryTimes=5

# master commit task interval
master.task.commit.interval=100


# only less than cpu avg load, master server can work. default value : the number of cpu cores * 2
master.max.cpuload.avg=10

# only larger than reserved memory, master server can work. default value : physical memory * 1/10, unit is G.
master.reserved.memory=1
</code></pre><p>master&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</p>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5BF9;MASTERLOGFILE&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;MasterLogFilter</p>
<ul>
<li>master_logback.xml</li>
</ul>
<pre><code>&lt;!-- Logback configuration. See http://logback.qos.ch/manual/index.html --&gt;
&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;120 seconds&quot;&gt; &lt;!--debug=&quot;true&quot; --&gt;
   &lt;property name=&quot;log.base&quot; value=&quot;logs&quot; /&gt;
   &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
      &lt;encoder&gt;
         &lt;pattern&gt;
            [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
         &lt;/pattern&gt;
         &lt;charset&gt;UTF-8&lt;/charset&gt;
      &lt;/encoder&gt;
   &lt;/appender&gt;

   &lt;appender name=&quot;MASTERLOGFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
      &lt;file&gt;${log.base}/escheduler-master.log&lt;/file&gt;
      &lt;filter class=&quot;cn.escheduler.server.master.log.MasterLogFilter&quot;&gt;
         &lt;level&gt;INFO&lt;/level&gt;
      &lt;/filter&gt;
      &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
         &lt;fileNamePattern&gt;${log.base}/escheduler-master.%d{yyyy-MM-dd_HH}.%i.log&lt;/fileNamePattern&gt;
         &lt;maxHistory&gt;20&lt;/maxHistory&gt;
         &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;
      &lt;/rollingPolicy&gt;
      &lt;encoder&gt;
         &lt;pattern&gt;
            [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
         &lt;/pattern&gt;
         &lt;charset&gt;UTF-8&lt;/charset&gt;
      &lt;/encoder&gt;
   &lt;/appender&gt;

   &lt;root level=&quot;INFO&quot;&gt;
      &lt;appender-ref ref=&quot;MASTERLOGFILE&quot;/&gt;
   &lt;/root&gt;
&lt;/configuration&gt;
</code></pre><p>worker&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>worker.properties</li>
</ul>
<pre><code># worker execute thread num
worker.exec.threads=100

# worker heartbeat interval
worker.heartbeat.interval=8

# submit the number of tasks at a time
worker.fetch.task.num = 10

# only less than cpu avg load, worker server can work. default value : the number of cpu cores * 2
worker.max.cpuload.avg=10

# only larger than reserved memory, worker server can work. default value : physical memory * 1/6, unit is G.
worker.reserved.memory=1
</code></pre><p>worker&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</p>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5BF9;WORKERLOGFILE&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;WorkerLogFilter</p>
<p>&#x5BF9;&#x4E8E; TASKLOGFILE &#xFF0C; &#x81EA;&#x5B9A;&#x4E49;&#x4E86;TaskLogAppender&#x548C;TaskLogFilter</p>
<ul>
<li>worker_logback.xml</li>
</ul>
<pre><code>&lt;!-- Logback configuration. See http://logback.qos.ch/manual/index.html --&gt;
&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;120 seconds&quot;&gt;
    &lt;property name=&quot;log.base&quot; value=&quot;logs&quot;/&gt;
    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
            &lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;
    &lt;appender name=&quot;TASKLOGFILE&quot; class=&quot;cn.escheduler.server.worker.log.TaskLogAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;INFO&lt;/level&gt;
        &lt;/filter&gt;
        &lt;filter class=&quot;cn.escheduler.server.worker.log.TaskLogFilter&quot;&gt;&lt;/filter&gt;
        &lt;file&gt;${log.base}/{processDefinitionId}/{processInstanceId}/{taskInstanceId}.log&lt;/file&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
            &lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;append&gt;true&lt;/append&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;WORKERLOGFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;file&gt;${log.base}/escheduler-worker.log&lt;/file&gt;
        &lt;filter class=&quot;cn.escheduler.server.worker.log.WorkerLogFilter&quot;&gt;
            &lt;level&gt;INFO&lt;/level&gt;
        &lt;/filter&gt;

        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;${log.base}/escheduler-worker.%d{yyyy-MM-dd_HH}.%i.log&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;20&lt;/maxHistory&gt;
            &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;
        &lt;/rollingPolicy&gt;
        &#x3000;&#x3000;&#x3000;&#x3000;&#x3000;
        &lt;encoder&gt;
            &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
            &lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &#x3000;&#x3000;
    &lt;/appender&gt;


    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;TASKLOGFILE&quot;/&gt;
        &lt;appender-ref ref=&quot;WORKERLOGFILE&quot;/&gt;
    &lt;/root&gt;
&lt;/configuration&gt;
</code></pre><h3 id="escheduler-web">escheduler-web</h3>
<p>web&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<ul>
<li>application.properties</li>
</ul>
<pre><code># server port
server.port=12345

# session config
server.session.timeout=7200


server.context-path=/escheduler/

# file size limit for upload
spring.http.multipart.max-file-size=1024MB
spring.http.multipart.max-request-size=1024MB

#post content
server.max-http-post-size=5000000
</code></pre><p>web&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</p>
<ul>
<li>webserver_logback.xml</li>
</ul>
<pre><code>    &lt;!-- Logback configuration. See http://logback.qos.ch/manual/index.html --&gt;
    &lt;configuration scan=&quot;true&quot; scanPeriod=&quot;120 seconds&quot;&gt;
       &lt;logger name=&quot;org.apache.zookeeper&quot; level=&quot;WARN&quot;/&gt;
       &lt;logger name=&quot;org.apache.hbase&quot; level=&quot;WARN&quot;/&gt;
       &lt;logger name=&quot;org.apache.hadoop&quot; level=&quot;WARN&quot;/&gt;

       &lt;property name=&quot;log.base&quot; value=&quot;logs&quot; /&gt;

       &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
          &lt;encoder&gt;
             &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
             &lt;/pattern&gt;
             &lt;charset&gt;UTF-8&lt;/charset&gt;
          &lt;/encoder&gt;
       &lt;/appender&gt;

       &lt;appender name=&quot;WEBSERVERLOGFILE&quot;  class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
          &lt;!-- Log level filter --&gt;
          &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
             &lt;level&gt;INFO&lt;/level&gt;
          &lt;/filter&gt;
            &lt;file&gt;${log.base}/escheduler-web-server.log&lt;/file&gt;
          &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
             &lt;fileNamePattern&gt;${log.base}/escheduler-web-server.%d{yyyy-MM-dd_HH}.%i.log&lt;/fileNamePattern&gt;
             &lt;maxHistory&gt;20&lt;/maxHistory&gt;
             &lt;maxFileSize&gt;64MB&lt;/maxFileSize&gt;
          &lt;/rollingPolicy&gt;

          &lt;encoder&gt;
             &lt;pattern&gt;
                [%level] %date{yyyy-MM-dd HH:mm:ss.SSS} %logger{96}:[%line] - %msg%n
             &lt;/pattern&gt;
             &lt;charset&gt;UTF-8&lt;/charset&gt;
          &lt;/encoder&gt;

       &lt;/appender&gt;

       &lt;root level=&quot;INFO&quot;&gt;
          &lt;appender-ref ref=&quot;WEBSERVERLOGFILE&quot; /&gt;
       &lt;/root&gt;
    &lt;/configuration&gt;
</code></pre><h2 id="&#x542F;&#x52A8;&#x505C;&#x6B62;&#x547D;&#x4EE4;">&#x542F;&#x52A8;&#x505C;&#x6B62;&#x547D;&#x4EE4;</h2>
<ul>
<li>&#x542F;&#x505C;Master</li>
</ul>
<pre><code>sh ./bin/arklifter-daemon.sh start master-server
sh ./bin/arklifter-daemon.sh stop master-server
</code></pre><ul>
<li>&#x542F;&#x505C;Worker</li>
</ul>
<pre><code>sh ./bin/arklifter-daemon.sh start worker-server
sh ./bin/arklifter-daemon.sh stop worker-server
</code></pre><ul>
<li>&#x542F;&#x505C;Web</li>
</ul>
<pre><code>sh ./bin/arklifter-daemon.sh start web-server
sh ./bin/arklifter-daemon.sh stop web-server
</code></pre><ul>
<li>&#x542F;&#x505C;Logger<pre><code>sh ./bin/arklifter-daemon.sh start logger-server
sh ./bin/arklifter-daemon.sh stop logger-server
</code></pre></li>
<li>&#x542F;&#x505C;Alert<pre><code>sh ./bin/arklifter-daemon.sh start alert-server
sh ./bin/arklifter-daemon.sh stop alert-server
</code></pre></li>
</ul>
<h2 id="&#x4E00;&#x952E;&#x542F;&#x505C;&#x811A;&#x672C;">&#x4E00;&#x952E;&#x542F;&#x505C;&#x811A;&#x672C;</h2>
<ul>
<li><p>&#x90E8;&#x7F72;&#x7528;&#x6237;&#x914D;&#x7F6E;</p>
<ol>
<li><p>&#x521B;&#x5EFA;&#x90E8;&#x7F72;&#x7528;&#x6237;</p>
<p>target/escheduler-{version}-SNAPSHOT/script/init_deploy_user.sh</p>
</li>
<li><p>&#x914D;&#x7F6E;</p>
<p>&#x56E0;&#x4E3A;escheduler worker &#x90FD;&#x662F;&#x4EE5; sudo -u {linux-user} &#x65B9;&#x5F0F;&#x6765;&#x6267;&#x884C;&#x4F5C;&#x4E1A;&#xFF0C;&#x6240;&#x4EE5;&#x90E8;&#x7F72;&#x7528;&#x6237;&#x9700;&#x8981;&#x6709; sudo &#x6743;&#x9650;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x514D;&#x5BC6;&#x7684;</p>
</li>
</ol>
</li>
</ul>
<pre><code>    vi /etc/sudoers

    # &#x90E8;&#x7F72;&#x7528;&#x6237;&#x662F; escheduler &#x8D26;&#x53F7;
    escheduler  ALL=(ALL)       NOPASSWD: NOPASSWD: ALL

    # &#x5E76;&#x4E14;&#x9700;&#x8981;&#x6CE8;&#x91CA;&#x6389; Default requiretty &#x4E00;&#x884C;
    #Default requiretty
</code></pre><ul>
<li>&#x521D;&#x59CB;&#x5316; hdfs</li>
</ul>
<p>&#x200B;       target/escheduler-{version}-SNAPSHOT/script/init_hdfs.sh</p>
<ul>
<li>&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x6587;&#x4EF6; install_config</li>
</ul>
<pre><code>    # &#x9879;&#x76EE;&#x6240;&#x5728;&#x76EE;&#x5F55;
    BASE_PATH=/opt/soft/program
    # &#x90E8;&#x7F72;&#x7684;&#x673A;&#x5668;
    IPS=ark0,ark1,ark2,ark3,ark4
</code></pre><ul>
<li><p>&#x8FD0;&#x884C;&#x914D;&#x7F6E;&#x6587;&#x4EF6; run_config</p>
<pre><code> # master&#x670D;&#x52A1;&#x6240;&#x5728;&#x673A;&#x5668;,&gt;=1&#x4E2A;
 MASTERS=ark0,ark1
 # worker&#x670D;&#x52A1;&#x6240;&#x5728;&#x673A;&#x5668;,&gt;=1&#x4E2A;
 WORKERS=ark2,ark3,ark4
 # alert&#x670D;&#x52A1;&#x6240;&#x5728;&#x673A;&#x5668;,1&#x4E2A;
 ALERTS=ark3
 # web&#x670D;&#x52A1;&#x6240;&#x5728;&#x673A;&#x5668;,1&#x4E2A;
 WEBSERVER=ark1
</code></pre></li>
<li><p>&#x521D;&#x59CB;&#x5316;&#x5B89;&#x88C5;&#x76EE;&#x5F55;</p>
<p> target/escheduler-{version}-SNAPSHOT/script/init_install_path.sh</p>
</li>
<li><p>&#x5C06; target/escheduler-{version}-SNAPSHOT &#x4E0B;&#x914D;&#x7F6E;&#x597D;&#x7684;conf&#x6587;&#x4EF6;&#x5939;&#x548C;&#x7F16;&#x8BD1;&#x597D;&#x7684;escheduler-{version}-SNAPSHOT.tar.gz &#x590D;&#x5236;&#x5230; <strong>&#x4E3B;&#x673A;&#x5668;</strong>&#x7684; BASE_PATH &#x76EE;&#x5F55;&#x4E0B; </p>
<p> &#x8BF4;&#x660E;&#xFF1A;<strong>&#x4E3B;&#x673A;&#x5668;</strong>&#x9700;&#x8981;&#x80FD;&#x514D;&#x5BC6;ssh&#x767B;&#x5F55;&#x5230;&#x5176;&#x5B83;&#x673A;&#x5668;&#x4E0A;</p>
</li>
<li><p>&#x542F;&#x52A8;&#x6240;&#x6709;&#x670D;&#x52A1;</p>
</li>
</ul>
<pre><code class="lang-&#x542F;&#x52A8;&#x6240;&#x6709;&#x670D;&#x52A1;">sh ./deploy/start_all.sh
</code></pre>
<ul>
<li>&#x5173;&#x95ED;&#x6240;&#x6709;&#x670D;&#x52A1;</li>
</ul>
<pre><code class="lang-&#x5173;&#x95ED;&#x6240;&#x6709;&#x670D;&#x52A1;">sh ./deploy/stop_all.sh
</code></pre>
<h2 id="&#x76D1;&#x63A7;&#x670D;&#x52A1;">&#x76D1;&#x63A7;&#x670D;&#x52A1;</h2>
<p>monitor_server.py &#x811A;&#x672C;&#x662F;&#x76D1;&#x542C;&#xFF0C;master&#x548C;worker&#x670D;&#x52A1;&#x6302;&#x6389;&#x91CD;&#x542F;&#x7684;&#x811A;&#x672C;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5728;&#x5168;&#x90E8;&#x670D;&#x52A1;&#x90FD;&#x542F;&#x52A8;&#x4E4B;&#x540E;&#x542F;&#x52A8;</p>
<p>nohup python -u monitor_server.py &gt; nohup.out 2&gt;&amp;1 &amp;</p>
<h2 id="&#x65E5;&#x5FD7;&#x67E5;&#x770B;">&#x65E5;&#x5FD7;&#x67E5;&#x770B;</h2>
<p>&#x65E5;&#x5FD7;&#x7EDF;&#x4E00;&#x5B58;&#x653E;&#x4E8E;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x5939;&#x5185;</p>
<pre><code class="lang-&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;"> logs/
    &#x251C;&#x2500;&#x2500; escheduler-alert-server.log
    &#x251C;&#x2500;&#x2500; escheduler-master-server.log
    |&#x2014;&#x2014; escheduler-worker-server.log
    |&#x2014;&#x2014; escheduler-web-server.log
    |&#x2014;&#x2014; escheduler-logger-server.log
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="deploy-foreground.html#问题" class="navigation navigation-prev " aria-label="Previous page: 问题">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="deploy-background.html#基础软件安装" class="navigation navigation-next " aria-label="Next page: 基础软件安装">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"后端部署","level":"1.3.2","depth":2,"next":{"title":"基础软件安装","level":"1.3.2.1","depth":3,"anchor":"#基础软件安装","path":"pages/deploy-background.md","ref":"pages/deploy-background.md#基础软件安装","articles":[]},"previous":{"title":"问题","level":"1.3.1.5","depth":3,"anchor":"#问题","path":"pages/deploy-foreground.md","ref":"pages/deploy-foreground.md#问题","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters","insert-logo-link","livereload"],"styles":{"website":"./styles/website.css"},"pluginsConfig":{"livereload":{},"insert-logo-link":{"src":"../images/logo.png","url":"/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"YIGUAN","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"调度系统-EasyScheduler","language":"zh-hans","gitbook":"3.2.3","description":"调度系统"},"file":{"path":"pages/deploy-background.md","mtime":"2019-03-07T08:53:26.537Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-03-07T08:58:54.922Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

